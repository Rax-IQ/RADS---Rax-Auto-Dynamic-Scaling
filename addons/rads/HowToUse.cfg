# =============================================================================
#  RADS – Rax Auto Dynamic Scaling
#  Version  : 1.0
#  Engine   : Godot 4.2+  |  Renderer: Forward+ or Mobile (required for FSR)
# =============================================================================
#
#  WHAT IS RADS?
#  -------------
#  RADS is a DLSS-like addon that automatically adjusts your game's rendering
#  quality in real time based on current FPS, so the game always runs as
#  smoothly as possible without you doing anything manually.
#
#  It controls three things at the same time:
#    1. 3D Resolution Scale  (how many pixels are rendered before upscaling)
#    2. FSR mode             (FSR 2 = quality, FSR 1 = fast, OFF = native)
#    3. Anti-Aliasing        (TAA + MSAA / FXAA / OFF depending on mode)
#    4. Shadow Atlas Size    (shadow quality based on FPS tier)
#
# =============================================================================
#  INSTALLATION
# =============================================================================
#
#  1. Copy the folder  addons/rss/  into your project's  res://addons/  folder.
#     Your file structure should look like this:
#
#       res://
#       └── addons/
#           └── rss/
#               ├── plugin.cfg
#               ├── plugin.gd
#               └── rss_manager.gd
#
#  2. Open:  Project → Project Settings → Plugins
#  3. Find "RADS – Rax Auto Dynamic Scaling" and set it to  ON
#  4. A new tab called "RADS" will appear in the bottom panel (next to Output)
#  5. Done! RADS runs automatically every time you play the game.
#
# =============================================================================
#  BOTTOM PANEL
# =============================================================================
#
#  After enabling the plugin you will see the RADS tab in the bottom panel.
#  Click it to see:
#
#    RADS  |  [ Balanced ]  |  Performance   Balanced   Quality  |  (info)
#
#  Click any of the three buttons to switch the default mode for your project.
#  The choice is saved in Project Settings under  rads/mode.
#
# =============================================================================
#  MODES
# =============================================================================
#
#  >> PERFORMANCE
#     - FSR        : always OFF (native bilinear, zero upscale cost)
#     - AA         : OFF
#     - Scale low  : 25%   (when FPS drops)
#     - Scale high : 35%   (when FPS recovers)
#     - Best for   : low-end devices or games where max FPS is the priority
#
#  == BALANCED
#     - FSR        : FSR 1 on drop  /  FSR 2 on recover
#     - AA         : FXAA (cheap, slight softening)
#     - Scale low  : 35%
#     - Scale high : 60%
#     - Best for   : mid-range devices, default recommended setting
#
#  ** QUALITY
#     - FSR        : FSR 1 on drop  /  FSR 2 on recover
#     - AA         : MSAA 4x + TAA (best edge quality)
#     - Scale low  : 50%
#     - Scale high : 75%
#     - Best for   : high-end devices where image quality matters
#
# =============================================================================
#  SHADOW ATLAS  (automatic, same rule in all modes)
# =============================================================================
#
#   FPS < 60   →  Shadow atlas size =  524   (fast, lower shadow detail)
#   FPS >= 60  →  Shadow atlas size = 2024   (balanced shadow quality)
#   FPS >= 300 →  Shadow atlas size = 4028   (maximum shadow detail)
#
#  Both positional lights (Omni / Spot) and Directional lights are affected.
#
# =============================================================================
#  FPS RULES  (automatic, same in all modes)
# =============================================================================
#
#   FPS < 60            → FSR OFF + lowest scale + AA OFF + shadow 524
#   FPS drops  5+ below baseline  → switch to low  scale + FSR 1
#   FPS recovers 5+ above baseline → switch to high scale + FSR 2
#
#  The baseline is a rolling average that slowly adapts to scene complexity,
#  so RADS won't panic when you first enter a heavy area.
#
# =============================================================================
#  AUTOLOAD  (RADSManager)
# =============================================================================
#
#  When the plugin is enabled, it automatically registers an Autoload called
#  RADSManager.  This means you can access it from ANY script in your game:
#
#    RADSManager.Performance()
#    RADSManager.Balanced()
#    RADSManager.Quality()
#
#  The Autoload is removed automatically when you disable the plugin.
#
# =============================================================================
#  PUBLIC FUNCTIONS
# =============================================================================
#
#  -- Mode switchers (call these from anywhere in your game) --
#
#    RADSManager.Performance()
#      Switches to Performance mode immediately.
#      FSR is always OFF in this mode regardless of FPS.
#
#    RADSManager.Balanced()
#      Switches to Balanced mode immediately.
#
#    RADSManager.Quality()
#      Switches to Quality mode immediately.
#
#  -- Info getters --
#
#    RADSManager.get_mode()   -> String
#      Returns the current mode name.
#      Example:  "Balanced"
#
#    RADSManager.get_scale()  -> String
#      Returns the current 3D render scale as a percentage string.
#      Example:  "50%"
#
#    RADSManager.get_fsr()    -> String
#      Returns the current FSR mode as a readable string.
#      Example:  "FSR 2"  /  "FSR 1"  /  "OFF"
#
#    RADSManager.get_aa()     -> String
#      Returns the current anti-aliasing method as a readable string.
#      Example:  "TAA + MSAA 4x"  /  "FXAA"  /  "OFF"
#
#    RADSManager.get_shadow() -> String
#      Returns the current shadow atlas size as a string.
#      Example:  "2024"
#
# =============================================================================
#  USAGE EXAMPLES
# =============================================================================
#
#  -- Settings menu: let the player pick a mode --
#
#    func _on_performance_button_pressed() -> void:
#        RADSManager.Performance()
#
#    func _on_balanced_button_pressed() -> void:
#        RADSManager.Balanced()
#
#    func _on_quality_button_pressed() -> void:
#        RADSManager.Quality()
#
#  -- Show current info in a label --
#
#    func _process(_delta) -> void:
#        $Label.text = "%s  |  %s  |  %s  |  Shadow %s" % [
#            RADSManager.get_mode(),
#            RADSManager.get_scale(),
#            RADSManager.get_fsr(),
#            RADSManager.get_shadow()
#        ]
#
#  -- Switch mode based on platform --
#
#    func _ready() -> void:
#        if OS.get_name() == "Android" or OS.get_name() == "iOS":
#            RADSManager.Performance()
#        else:
#            RADSManager.Balanced()
#
# =============================================================================
#  NOTES
# =============================================================================
#
#  - FSR 2 requires Forward+ or Mobile renderer.
#    It will NOT work with the Compatibility renderer.
#
#  - TAA (Temporal AA) may cause ghosting on fast-moving objects.
#    This is expected behavior for TAA in general.
#
#  - RADS reads and writes to ProjectSettings at runtime for mode persistence.
#    If you don't want persistence, just call the function without saving.
#
#  - RADS does nothing inside the editor (Engine.is_editor_hint() guard).
#    All logic only runs during actual gameplay.
#
# =============================================================================
==============================================================================

==============================================================================
# =============================================================================
#  RADS – Rax Auto Dynamic Scaling
#  الإصدار  : 1.0
#  المحرك   : Godot 4.2+  |  المُصيِّر: Forward+ أو Mobile (مطلوب لـ FSR)
# =============================================================================
#
#  إيه هو RADS؟
#  ------------
#  RADS هو أداة زي DLSS بتضبط جودة الرسم في لعبتك أوتوماتيك حسب الـ FPS
#  عشان اللعبة تفضل شغالة بسلاسة من غير ما تعمل أي حاجة يدوي.
#
#  بيتحكم في أربع حاجات مع بعض:
#    1. نسبة دقة الـ 3D   (كام بيكسل بيترسم قبل الـ upscaling)
#    2. وضع FSR           (FSR 2 = جودة / FSR 1 = سرعة / OFF = عادي)
#    3. Anti-Aliasing     (TAA+MSAA / FXAA / OFF حسب الـ Mode)
#    4. حجم Shadow Atlas  (جودة الظلال حسب الـ FPS)
#
# =============================================================================
#  طريقة التثبيت
# =============================================================================
#
#  1. انسخ مجلد  addons/rss/  داخل مجلد  res://addons/  في مشروعك.
#     الشكل المطلوب:
#
#       res://
#       └── addons/
#           └── rss/
#               ├── plugin.cfg
#               ├── plugin.gd
#               └── rss_manager.gd
#
#  2. افتح:  Project → Project Settings → Plugins
#  3. لاقي "RADS – Rax Auto Dynamic Scaling" وفعّله (ON)
#  4. هيظهر تاب اسمه "RADS" في الـ Bottom Panel جنب Output
#  5. خلاص! RADS بيشتغل أوتوماتيك كل ما تشغّل اللعبة.
#
# =============================================================================
#  الـ Bottom Panel
# =============================================================================
#
#  بعد تفعيل الـ Plugin هتشوف تاب RADS في الأسفل.
#  لما تضغط عليه هتشوف:
#
#    RADS  |  [ Balanced ]  |  Performance   Balanced   Quality  |  (معلومات)
#
#  اضغط على أي Mode عشان تغيّره، والاختيار بيتحفظ في Project Settings.
#
# =============================================================================
#  الـ Modes
# =============================================================================
#
#  >> PERFORMANCE (الأداء)
#     - FSR        : مطفي دايماً (مفيش تكلفة upscaling خالص)
#     - AA         : مطفي
#     - Scale منخفض : 25%  (لما الـ FPS ينزل)
#     - Scale عالي  : 35%  (لما الـ FPS يرجع)
#     - الأنسب لـ  : الأجهزة الضعيفة أو لما تحتاج أقصى FPS
#
#  == BALANCED (متوازن)
#     - FSR        : FSR 1 لما ينزل  /  FSR 2 لما يرجع
#     - AA         : FXAA (رخيص، يعمل نعومة خفيفة)
#     - Scale منخفض : 35%
#     - Scale عالي  : 60%
#     - الأنسب لـ  : الأجهزة المتوسطة، الإعداد الافتراضي المنصوح بيه
#
#  ** QUALITY (الجودة)
#     - FSR        : FSR 1 لما ينزل  /  FSR 2 لما يرجع
#     - AA         : MSAA 4x + TAA (أفضل جودة للحواف)
#     - Scale منخفض : 50%
#     - Scale عالي  : 75%
#     - الأنسب لـ  : الأجهزة القوية اللي الجودة فيها هي الأولوية
#
# =============================================================================
#  Shadow Atlas  (أوتوماتيك، نفس القاعدة في كل الـ Modes)
# =============================================================================
#
#   FPS < 60   →  حجم Shadow Atlas =  524   (سريع، جودة ظلال منخفضة)
#   FPS >= 60  →  حجم Shadow Atlas = 2024   (جودة ظلال متوازنة)
#   FPS >= 300 →  حجم Shadow Atlas = 4028   (أعلى جودة ظلال)
#
#  بيأثر على الـ Omni Lights و Spot Lights و Directional Light.
#
# =============================================================================
#  قواعد الـ FPS  (أوتوماتيك في كل الـ Modes)
# =============================================================================
#
#   FPS < 60                    → FSR OFF + Scale أدنى + AA OFF + Shadow 524
#   FPS نزل 5+ تحت الـ Baseline → يحول لـ Scale منخفض + FSR 1
#   FPS رجع 5+ فوق الـ Baseline → يحول لـ Scale عالي  + FSR 2
#
#  الـ Baseline بيتحسب كمتوسط متحرك بيتأقلم مع تعقيد المشهد تدريجياً،
#  يعني مش هيذعر لو دخلت منطقة ثقيلة فجأة.
#
# =============================================================================
#  الـ Autoload  (RADSManager)
# =============================================================================
#
#  لما تفعّل الـ Plugin، بيسجّل Autoload اسمه RADSManager أوتوماتيك.
#  يعني تقدر توصله من أي سكربت في لعبتك مباشرة:
#
#    RADSManager.Performance()
#    RADSManager.Balanced()
#    RADSManager.Quality()
#
#  لما تعطّل الـ Plugin، الـ Autoload بيتشال أوتوماتيك.
#
# =============================================================================
#  الفانكشنز العامة (Public Functions)
# =============================================================================
#
#  -- تغيير الـ Mode (استدعيهم من أي مكان في لعبتك) --
#
#    RADSManager.Performance()
#      يحوّل لـ Performance فوراً.
#      FSR مطفي دايماً في الـ Mode ده بغض النظر عن الـ FPS.
#
#    RADSManager.Balanced()
#      يحوّل لـ Balanced فوراً.
#
#    RADSManager.Quality()
#      يحوّل لـ Quality فوراً.
#
#  -- الـ Getters (معلومات الحالة الحالية) --
#
#    RADSManager.get_mode()   -> String
#      يرجّع اسم الـ Mode الحالي.
#      مثال:  "Balanced"
#
#    RADSManager.get_scale()  -> String
#      يرجّع نسبة الـ 3D Scale الحالية.
#      مثال:  "50%"
#
#    RADSManager.get_fsr()    -> String
#      يرجّع وضع الـ FSR الحالي.
#      مثال:  "FSR 2"  /  "FSR 1"  /  "OFF"
#
#    RADSManager.get_aa()     -> String
#      يرجّع طريقة الـ Anti-Aliasing الحالية.
#      مثال:  "TAA + MSAA 4x"  /  "FXAA"  /  "OFF"
#
#    RADSManager.get_shadow() -> String
#      يرجّع حجم الـ Shadow Atlas الحالي.
#      مثال:  "2024"
#
# =============================================================================
#  أمثلة استخدام
# =============================================================================
#
#  -- قايمة إعدادات: خلّي اللاعب يختار الـ Mode --
#
#    func _on_performance_button_pressed() -> void:
#        RADSManager.Performance()
#
#    func _on_balanced_button_pressed() -> void:
#        RADSManager.Balanced()
#
#    func _on_quality_button_pressed() -> void:
#        RADSManager.Quality()
#
#  -- اعرض المعلومات الحالية في Label --
#
#    func _process(_delta) -> void:
#        $Label.text = "%s  |  %s  |  %s  |  Shadow %s" % [
#            RADSManager.get_mode(),
#            RADSManager.get_scale(),
#            RADSManager.get_fsr(),
#            RADSManager.get_shadow()
#        ]
#
#  -- غيّر الـ Mode حسب الجهاز --
#
#    func _ready() -> void:
#        if OS.get_name() == "Android" or OS.get_name() == "iOS":
#            RADSManager.Performance()
#        else:
#            RADSManager.Balanced()
#
# =============================================================================
#  ملاحظات مهمة
# =============================================================================
#
#  - FSR 2 محتاج مُصيِّر Forward+ أو Mobile.
#    مش هيشتغل مع Compatibility renderer خالص.
#
#  - TAA ممكن يعمل ghosting على الأجسام اللي بتتحرك بسرعة.
#    ده طبيعي في TAA بشكل عام مش مشكلة في RADS.
#
#  - RADS مش بيشتغل جوه الـ Editor خالص،
#    كل اللوجيك بيشتغل فقط أثناء تشغيل اللعبة الفعلي.
#
#  - الـ Mode بيتحفظ في Project Settings تحت المفتاح  rads/mode
#    يعني لو غيّرته في الـ Editor هيفضل محفوظ للمرة الجاية.
#
# =============================================================================
